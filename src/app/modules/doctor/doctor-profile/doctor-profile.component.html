<!-- Breadcrumb -->
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="doctor/home">หน้าแรก</a></li>
        <li class="breadcrumb-item active" aria-current="page">ประวัติแพทย์</li>
    </ol>
</nav>

<div class="container text-dark">
    <div
        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center mb-3 border-bottom text-dark">
        <h3>ประวัติแพทย์</h3>
        <div class="btn-toolbar mb-2 mb-md-0">
            <!-- <div class="btn-group me-2">
                <button type="button" class="btn btn-sm btn-outline-success" data-bs-toggle="modal"
                    data-bs-target="#editprofile">แก้ไขข้อมูล</button>
            </div> -->
        </div>
    </div>

    <div class="row">

        <!-- data-medical / Settings -->
        <div class="col-md-4 p-1">
            <form [formGroup]="DataDoctorForm">
                <!-- data-medical -->
                <div class="card" style="background-color: #0d6dfd;">
                    <div class="card-header text-center p-1 border-0">
                        <div class="row profile" *ngFor="let item of listDataDoctor; let i = index">
                            <img src="{{item.userProfession}}" alt="" width="290" height="250">
                        </div>
                    </div>
                    <div class="card-body p-2">
                        <div class="row justify-content-center text-white">
                            <div class="col-md-5 p-1 text-end">
                                <label for="staticEmail" class="col-sm-auto col-form-label fw-bold">เลขที่ใบอนุญาต :
                                </label>
                            </div>
                            <div class="col-md-5" style="padding-left: 10px;padding-top: 6px;">
                                <input type="text" readonly class="form-control-plaintext text-white fw-bold"
                                    id="staticEmail" value="" formControlName="userProfessionId">
                            </div>
                            <div class="col-md-2 pt-2">
                                <i class="bi bi-pencil-square" style="font-size: 19px; color: rgb(255, 255, 255);"
                                    data-bs-toggle="modal" data-bs-target="#editMdIdModal"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <br>

                <!-- settings -->
                <div class="card">
                    <div class="card-header">
                        <div class="row justify-content-between">
                            <div class="col-md-4 col-sm-6 align-self-center">
                                <h6 style="margin: 0px;">การใช้งาน</h6>
                            </div>
                            <!-- <div class="col-md-4 col-sm-6 text-end p-0">
                                    <div class="dropdown no-arrow p-0">
                                        <a class="nav-link pb-0 pt-0" aria-expanded="false" data-bs-toggle="dropdown"
                                            href="#">
                                            <i class="bi bi-pencil-square"
                                                style="font-size: 19px; color: rgb(238, 91, 6);"></i>
                                        </a>
                                        <div class="dropdown-menu shadow dropdown-menu-end animated--grow-in">
                                            <a class="dropdown-item" data-bs-toggle="modal"
                                                data-bs-target="#newpasswordModal">
                                                <i
                                                    class="fas fa-user fa-sm fa-fw me-2 text-gray-400"></i>เปลี่ยนรหัสผ่าน</a>
                                            <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#edittelModal">
                                            <i class="fas fa-cogs fa-sm fa-fw me-2 text-gray-400"></i>แก้ไขเบอร์โทร</a>
                                        <a class="dropdown-item" data-bs-toggle="modal"
                                            data-bs-target="#editEmailModal">
                                            <i class="fas fa-list fa-sm fa-fw me-2 text-gray-400"></i>แก้ไขอีเมล</a>
                                        </div>
                                    </div>
                                </div> -->
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row" style="padding-left: 15px;">
                            <div class="col-auto">
                                <label for="inputDate" class="col-sm-auto col-form-label">สถานะการใช้งาน : </label>
                            </div>
                            <div class="col-3 align-self-center">
                                <input type="text" readonly
                                    class="form-control-plaintext form-control-sm bg-success text-center text-light fw-bold m-0"
                                    id="staticDate" value="" formControlName="userStatus">
                            </div>
                        </div>
                        <div class="row" style="padding-left: 15px;">
                            <div class="col-4">
                                <label for="inputDate" class="col-sm-auto col-form-label">รหัสผู้ใช้งาน : </label>
                            </div>
                            <div class="col-8">
                                <input type="text" readonly class="form-control-plaintext" id="staticDate" value=""
                                    formControlName="userId">
                            </div>
                        </div>
                        <div class="row" style="padding-left: 15px;">
                            <div class="col-4">
                                <label for="inputDate" class="col-sm-auto col-form-label">Username : </label>
                            </div>
                            <div class="col-8">
                                <input type="text" readonly class="form-control-plaintext" id="staticDate" value=""
                                    formControlName="userUsername">
                            </div>
                        </div>
                        <!-- <div class="row" style="padding-left: 15px;">
                                <div class="col-4">
                                    <label for="inputDate" class="col-sm-auto col-form-label">Password : </label>
                                </div>
                                <div class="col-8">
                                    <input type="password" readonly class="form-control-plaintext" id="staticDate" value=""  formControlName="userPassword">
                                </div>
                            </div> -->
                    </div>
                </div>
            </form>
        </div>

        <!-- profile -->
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <div class="row justify-content-between">
                        <div class="col-md-4 col-sm-6 align-self-center">
                            <h6 style="margin: 0px;">ประวัติแพทย์</h6>
                        </div>
                        <div class="col-md-2 col-sm-6 text-end m-0 p-0">
                            <h6 style="margin: 0px;">
                                <!-- แก้ไข&nbsp; -->
                                <i class="bi bi-pencil-square"
                                    style="font-size: 19px; color: rgb(238, 91, 6); padding-right: 10px;"
                                    data-bs-toggle="modal" data-bs-target="#editprofile"></i>
                            </h6>
                            <!-- <div class="dropdown no-arrow p-0">
                                <a class="nav-link pb-0 pt-0" aria-expanded="false" data-bs-toggle="dropdown">
                                    <i class="bi bi-pencil-square" style="font-size: 19px; color: rgb(238, 91, 6);"></i>
                                </a>
                                <div class="dropdown-menu shadow dropdown-menu-end animated--grow-in">
                                    <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#editMdIdModal">
                                        <i
                                            class="fas fa-list fa-sm fa-fw me-2 text-gray-400"></i>ใบอนุญาตประกอบวิชาชีพ</a>
                                    <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#editprofile">
                                        <i class="fas fa-cogs fa-sm fa-fw me-2 text-gray-400"></i>แก้ไขข้อมูลส่วนตัว</a>
                                    <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#newpasswordModal">
                                        <i class="fas fa-cogs fa-sm fa-fw me-2 text-gray-400"></i>แก้ไขรหัสผ่าน</a> 
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <form [formGroup]="DataDoctorForm" class="row g-4">
                        <div class="col-md-4">
                            <label for="validationCustom01" class="form-label">หมายเลขประจำตัวประชาชน</label>
                            <input type="text" class="form-control" id="validationCustom01" value=""
                                formControlName="userCardId" readonly>
                        </div>
                        <div class="col-md-2">
                            <label for="validationCustom01" class="form-label">คำนำหน้า</label>
                            <input type="text" class="form-control" id="validationCustom01" value=""
                                formControlName="userTitle" readonly>
                        </div>
                        <div class="col-md-3">
                            <label for="validationCustom02" class="form-label">ชื่อ</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userFirstname" readonly>
                        </div>
                        <div class="col-md-3">
                            <label for="validationCustom02" class="form-label">สกุล</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userLastname" readonly>
                        </div>
                        <div class="col-md-4">
                            <label for="validationCustom02" class="form-label">วันเดือนปีเกิด</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userBirthday" readonly>
                        </div>
                        <div class="col-md-2 col-sm-6">
                            <label for="validationCustom02" class="form-label">เพศ</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userGender" readonly>
                        </div>
                        <div class="col-md-2 col-sm-6">
                            <label for="validationCustom02" class="form-label">กรุ๊ปเลือด</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userBlood" readonly>
                        </div>
                        <div class="col-md-4">
                            <label for="validationCustom02" class="form-label">เบอร์โทร</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userPhone" readonly>
                        </div>
                        <div class="col-md-4">
                            <label for="validationCustom02" class="form-label">อีเมล</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userEmail" readonly>
                        </div>
                        <div class="col-md-4">
                            <label for="validationCustom02" class="form-label">วุฒิการศึกษา</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userGraduate" readonly>
                        </div>
                        <div class="col-md-4">
                            <label for="validationCustom02" class="form-label">แผนกการรักษา</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userDepartment" readonly>
                        </div>
                        <div class="col-md-5">
                            <label for="validationCustom02" class="form-label">ตำแหน่ง</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userPosition" readonly>
                        </div>
                        <div class="col-md-7">
                            <label for="validationCustom02" class="form-label">ที่อยู่</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="userAddrass" readonly>
                        </div>
                        <div class="col-md-3">
                            <label for="validationCustom02" class="form-label">รหัสไปรษณีย์</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="zipCode" readonly>
                        </div>
                        <div class="col-md-3">
                            <label for="validationCustom02" class="form-label">จังหวัด</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="provinceInput" readonly>
                        </div>
                        <div class="col-md-3">
                            <label for="validationCustom02" class="form-label">อำเภอ</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="districtInput" readonly>
                        </div>
                        <div class="col-md-3">
                            <label for="validationCustom02" class="form-label">ตำบล</label>
                            <input type="text" class="form-control" id="validationCustom02" value=""
                                formControlName="subdistrictInput" readonly>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <br>
</div>

<!-- Modal edit data -->
<div class="modal fade" id="editprofile" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="editprofileLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content text-dark"
            style="background-image: url(https://images.pexels.com/photos/3611882/pexels-photo-3611882.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940);">
            <div class="modal-body">
                <div class="card p-3" style="border-radius: 10px;">
                    <h5 class="text-center pb-2">แก้ไขข้อมูล</h5>
                    <form [formGroup]="DataDoctorForm" (ngSubmit)="onSubmit()" class="row g-4">
                        <div class="row g-4">
                            <div class="col-md-4">
                                <label for="validationCustom01" class="form-label">หมายเลขประจำตัวประชาชน</label>
                                <input type="text" class="form-control" id="validationCustom01" value=""
                                    formControlName="userCardId" readonly>
                            </div>
                            <div class="col-md-2">
                                <label for="validationCustom01" class="form-label">คำนำหน้า</label>
                                <select id="inputState" class="form-select" formControlName="userTitle">
                                    <option value="" disabled>เลือกคำนำหน้า</option>
                                    <option *ngFor="let prf of prefixNames" [ngValue]="prf">{{ prf }}</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="validationCustom02" class="form-label">ชื่อ</label>
                                <input type="text" class="form-control" id="validationCustom02" value=""
                                    formControlName="userFirstname">
                            </div>
                            <div class="col-md-3">
                                <label for="validationCustom02" class="form-label">สกุล</label>
                                <input type="text" class="form-control" id="validationCustom02" value=""
                                    formControlName="userLastname">
                            </div>
                            <div class="col-md-4">
                                <label for="validationCustom02" class="form-label">วันเดือนปีเกิด</label>
                                <input type="date" class="form-control" id="validationCustom02" value=""
                                    formControlName="userBirthday">
                            </div>
                            <div class="col-md-2">
                                <label for="validationCustom02" class="form-label">เพศ</label>
                                <select id="inputState" class="form-select" formControlName="userGender">
                                    <option value="" disabled>เลือกเพศ</option>
                                    <option *ngFor="let gender of genders" [ngValue]="gender">{{ gender }}</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <label for="validationCustom02" class="form-label">กรุ๊ปเลือด</label>
                                <select id="inputState" class="form-select" formControlName="userBlood">
                                    <option value="" disabled>เลือก กรุ๊ปเลือด</option>
                                    <option *ngFor="let blood of bloods" [ngValue]="blood">{{ blood }}</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="validationCustom02" class="form-label">เบอร์โทร</label>
                                <input type="text" class="form-control" id="validationCustom02" value=""
                                    formControlName="userPhone">
                            </div>
                            <div class="col-md-4">
                                <label for="validationCustom02" class="form-label">อีเมล</label>
                                <input type="text" class="form-control" id="validationCustom02" value=""
                                    formControlName="userEmail">
                            </div>
                            <div class="col-md-4">
                                <label for="validationCustom02" class="form-label">วุฒิการศึกษา</label>
                                <select id="inputState" class="form-select" formControlName="userGraduate">
                                    <option value="" disabled>เลือกวุฒิการศึกษา</option>
                                    <option *ngFor="let graduate of graduates" [ngValue]="graduate">{{ graduate }}
                                    </option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="validationCustom02" class="form-label">แผนกการรักษา</label>
                                <select id="inputState" class="form-select" formControlName="userDepartment">
                                    <option value="" disabled>เลือกแผนกการรักษา</option>
                                    <option *ngFor="let department of departments" [ngValue]="department">{{ department
                                        }}</option>
                                </select>
                            </div>
                            <div class="col-md-5">
                                <label for="validationCustom02" class="form-label">ตำแหน่ง</label>
                                <select id="inputState" class="form-select" formControlName="userPosition">
                                    <option value="" disabled>เลือกตำแหน่ง</option>
                                    <option *ngFor="let doctorPosition of doctorPositions" [ngValue]="doctorPosition">{{
                                        doctorPosition }}</option>
                                </select>
                            </div>
                            <div class="col-md-7">
                                <label for="validationCustom02" class="form-label">ที่อยู่</label>
                                <input type="text" class="form-control" id="validationCustom02" value=""
                                    formControlName="userAddrass">
                            </div>
                            <div class="col-md-3">
                                <label for="validationCustom02" class="form-label">รหัสไปรษณีย์</label>
                                <input type="text" class="form-control" id="validationCustom02" value=""
                                    (change)="changeUserZipCode($event)" formControlName="zipCode">
                            </div>
                            <div class="col-md-3">
                                <label for="validationCustom02" class="form-label">จังหวัด</label>
                                <select id="inputState" class="form-select" formControlName="province">
                                    <option value="" disabled>--จังหวัด--</option>
                                    <option *ngFor="let pro of provinces" [ngValue]="pro.pvnNameTh">{{ pro.pvnNameTh }}
                                    </option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="validationCustom02" class="form-label">อำเภอ</label>
                                <select id="inputState" class="form-select" formControlName="district">
                                    <option value="" disabled>--อำเภอ--</option>
                                    <option *ngFor="let dis of districts" [ngValue]="dis.disNameTh">{{ dis.disNameTh }}
                                    </option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label for="validationCustom02" class="form-label">ตำบล</label>
                                <select id="inputState" class="form-select" formControlName="sdtId">
                                    <option value="" disabled>--ตำบล--</option>
                                    <option *ngFor="let subD of subdistricts" [ngValue]="subD.sdtId">{{
                                        subD.sdtNameTh }}</option>
                                </select>
                            </div>
                            <div class="col-md-12 text-center pt-3">
                                <button type="submit" class="btn btn-success">บันทึกข้อมูล</button>&nbsp;
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal"
                                    (click)="refresh()">ยกเลิก</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Model New Password -->
<div class="modal fade" id="newpasswordModal" data-bs-backdrop="static" tabindex="-1"
    aria-labelledby="newpasswordModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered text-dark">
        <div class="modal-content">
            <div class="modal-body bg-light">
                <div class="row justify-content-end p-2 pt-0">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="card p-3">
                    <form [formGroup]="DataDoctorForm">
                        <div class="row justify-content-center">
                            <h5 class="text-center font-monospace pb-2">cd</h5>
                            <br>
                            <!-- <div class="col-md-9 pb-3">
                                <input class="form-control" type="password" placeholder="รหัสผ่านเดิม"
                                    aria-label="default input example" formControlName="userPassword" readonly>
                            </div> -->
                            <div class="col-md-9 pb-3">
                                <show-hide-password size="sm">
                                    <input class="form-control" type="password" placeholder="รหัสผ่านใหม่"
                                        aria-label="default input example" required>
                                </show-hide-password>
                            </div>
                            <div class="col-md-9">
                                <show-hide-password size="sm">
                                    <input class="form-control" type="password" placeholder="ยืนยันรหัสผ่าน"
                                        aria-label="default input example" required>
                                </show-hide-password>
                            </div>
                        </div>
                        <div class="col-md-12 text-center pt-3">
                            <button type="submit" class="fw-bolder btn btn-success">ตั้งค่าใหม่</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Model Edit MdId -->
<div class="modal fade" id="editMdIdModal" data-bs-backdrop="static" tabindex="-1" aria-labelledby="editMdIdModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered text-dark">
        <div class="modal-content">
            <div class="modal-body bg-light" style="border-radius: 10px;">
                <!-- <div class="row justify-content-end p-2 pt-0">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div> -->
                <form [formGroup]="DataDoctorForm" (ngSubmit)="onSubmitMdId()">
                    <div class="card p-3 shadow-sm" style="border-radius: 5px;">
                        <h5 class="text-center font-monospace p-0 m-0">ใบอนุญาตประกอบวิชาชีพเวชกรรม</h5>
                    </div>
                    <br class="m-1">
                    <div class="card p-3 shadow-sm" style="border-radius: 5px;">
                        <div class="row justify-content-center p-3">
                            <div class="row justify-content-center">
                                <label for="staticEmail" class="col-md-6 col-form-label fw-bold">เลขที่ใบอนุญาตวิชาชีพ :
                                </label>
                                <div class="col-md-6">
                                    <input type="text" class="form-control form-control-sm" id="staticEmail" value=""
                                        formControlName="userProfessionId">
                                </div>
                            </div>
                            <hr class="m-3 shadow-sm">
                            <div class="row justify-content-center pt-2">
                                <div class="card p-2 col-md-11 text-center">
                                    <img [src]="url">
                                    <div class="text-start pt-2">
                                        <input type="file" (change)="onUplodeFile($event)">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-md-auto pt-3">
                            <button type="submit" class="fw-bolder btn btn-success">บันทึกข้อมูล</button>&nbsp;
                            <button type="button" class="fw-bolder btn btn-danger" data-bs-dismiss="modal"
                                aria-label="Close">ปิด</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>